(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
"use strict";

exports.main = ({
  userInfo,
  ipfs,
  rooms
}) => {
  let userName = 'user #0'; //document.getElementById('roomPostfix').innerText = randRoomPostfix;

  document.getElementById('userName').innerText = userName;
  var container = document.getElementById("jsoneditor");
  var editor = new JSONEditor(container, {});

  document.getElementById('btn1').onclick = () => {
    editor.set({
      txType: "gasTransfer",
      fromPeerId: userName,
      toPeerId: "user #0",
      amt: 15
    });
  };

  document.getElementById('btn2').onclick = () => {
    editor.set({
      txType: "newNodeJoinNeedRa",
      userName,
      depositAmt: 10,
      ipfsPeerId: rooms.taskRoom.getMyPeerId()
    });
  };

  document.getElementById('btn3').onclick = () => {
    editor.set({
      txType: 'setProofOfTrustForThisNode',
      psrData: 'placeholder',
      isHacked: true,
      tpmPublicKey: 'placeholder'
    });
  };

  document.getElementById('btn4').onclick = () => {
    editor.set({
      txType: "uploadLambda",
      lambdaName: "hello_world",
      dockerImg: "placeholder",
      payment: "payPerUse",
      ownerName: userName,
      amt: 2
    });
  };

  document.getElementById('btn5').onclick = () => {
    editor.set({
      txType: "computeTask",
      userName,
      lambdaCid: "PLEASE_REPLACE_THIS_VALUE_TO_THE_lambdaCid_YOU_GOT_FROM_PREVIOUS_uploadLambda_TASK",
      postSecData: 'placeholder',
      env: {
        network: 'totalIsolated',
        ipAllowed: 'none',
        p2pTrafficInAllowed: 'owner',
        resultSendBackTo: 'owner',
        errorSendBackTo: 'owner',
        osRequirement: "none",
        timeOut: '100',
        cleanUpAfter: 'totalWipeout'
      },
      executorRequirement: {
        credit: 3,
        deposit: 10
      },
      multiParties: 'none',
      depositAmt: 3
    });
  };

  document.getElementById('selectUser').onchange = () => {
    userName = document.getElementById('selectUser').value;
    document.getElementById('userName').innerHTML = userName;
  };

  document.getElementById('sendAction').onclick = () => {
    //const userName = document.getElementById('userName').innerHTML;
    console.log("ready to send action,", JSON.stringify(editor.get(), null, 2));
    const jsonObj = editor.get();
    const txType = jsonObj.txType;

    try {
      let channelRoom;
      let cid;
      const broadcastObj = {
        txType
      };
      let promiseCid;

      switch (txType) {
        case "gasTransfer":
          {
            channelRoom = rooms.taskRoom;
            const {
              fromPeerId,
              toPeerId,
              amt
            } = jsonObj;
            promiseCid = ipfs.dag.put({
              fromPeerId,
              toPeerId,
              amt
            });
            break;
          }

        case "setProofOfTrustForThisNode":
          window.proofOfTrustTest = jsonObj;
          return;

        case "newNodeJoinNeedRa":
        case 'uploadLambda':
        case "computeTask":
          channelRoom = rooms.taskRoom;
          promiseCid = ipfs.dag.put(jsonObj);
          break;

        default:
          return console.log("unsupported sendAction txType,", txType);
      }

      promiseCid.then(cid => {
        broadcastObj.cid = cid.toBaseEncodedString();

        if (txType == 'uploadLambda') {
          logToWebPage(`Please record this CID number, you will need it when you submit a compute task using this Lamdba: ${broadcastObj.cid}`);
        }

        channelRoom.broadcast(JSON.stringify(broadcastObj));
        console.log("Sent action: ", JSON.stringify(broadcastObj));
      }).catch(e => {
        throw e;
      });
    } catch (e) {
      console.log("inside sendActionToRoom, excpetion:", e);
    }
  };
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJ3ZWJTcmMvc2ltdWxhdG9yLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7QUNDQSxPQUFPLENBQUMsSUFBUixHQUFlLENBQUM7QUFBQyxFQUFBLFFBQUQ7QUFBVyxFQUFBLElBQVg7QUFBaUIsRUFBQTtBQUFqQixDQUFELEtBQTJCO0FBQ3hDLE1BQUksUUFBUSxHQUFHLFNBQWYsQ0FEd0MsQ0FFeEM7O0FBQ0EsRUFBQSxRQUFRLENBQUMsY0FBVCxDQUF3QixVQUF4QixFQUFvQyxTQUFwQyxHQUFnRCxRQUFoRDtBQUdBLE1BQUksU0FBUyxHQUFHLFFBQVEsQ0FBQyxjQUFULENBQXdCLFlBQXhCLENBQWhCO0FBQ0EsTUFBSSxNQUFNLEdBQUcsSUFBSSxVQUFKLENBQWUsU0FBZixFQUEwQixFQUExQixDQUFiOztBQUVBLEVBQUEsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsTUFBeEIsRUFBZ0MsT0FBaEMsR0FBMEMsTUFBSTtBQUM1QyxJQUFBLE1BQU0sQ0FBQyxHQUFQLENBQVc7QUFDVCxNQUFBLE1BQU0sRUFBQyxhQURFO0FBRVQsTUFBQSxVQUFVLEVBQUUsUUFGSDtBQUdULE1BQUEsUUFBUSxFQUFDLFNBSEE7QUFJVCxNQUFBLEdBQUcsRUFBQztBQUpLLEtBQVg7QUFNRCxHQVBEOztBQVFBLEVBQUEsUUFBUSxDQUFDLGNBQVQsQ0FBd0IsTUFBeEIsRUFBZ0MsT0FBaEMsR0FBMEMsTUFBSTtBQUM1QyxJQUFBLE1BQU0sQ0FBQyxHQUFQLENBQVc7QUFDVCxNQUFBLE1BQU0sRUFBQyxtQkFERTtBQUVULE1BQUEsUUFGUztBQUdULE1BQUEsVUFBVSxFQUFDLEVBSEY7QUFJVCxNQUFBLFVBQVUsRUFBQyxLQUFLLENBQUMsUUFBTixDQUFlLFdBQWY7QUFKRixLQUFYO0FBT0QsR0FSRDs7QUFTQSxFQUFBLFFBQVEsQ0FBQyxjQUFULENBQXdCLE1BQXhCLEVBQWdDLE9BQWhDLEdBQTBD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Q0UsVUFBQSxNQUFNLENBQUMsZ0JBQVAsR0FBMEIsT0FBMUI7QUFDQTs7QUFDRixhQUFLLG1CQUFMO0FBQ0EsYUFBSyxjQUFMO0FBQ0EsYUFBSyxhQUFMO0FBQ0UsVUFBQSxXQUFXLEdBQUcsS0FBSyxDQUFDLFFBQXBCO0FBQ0EsVUFBQSxVQUFVLEdBQUcsSUFBSSxDQUFDLEdBQUwsQ0FBUyxHQUFULENBQWEsT0FBYixDQUFiO0FBQ0E7O0FBQ0Y7QUFDRSxpQkFBTyxPQUFPLENBQUMsR0FBUixDQUFZLGdDQUFaLEVBQThDLE1BQTlDLENBQVA7QUFwQko7O0FBc0JBLE1BQUEsVUFBVSxDQUFDLElBQVgsQ0FBaUIsR0FBRCxJQUFPO0FBQ3JCLFFBQUEsWUFBWSxDQUFDLEdBQWIsR0FBbUIsR0FBRyxDQUFDLG1CQUFKLEVBQW5COztBQUNBLFlBQUcsTUFBTSxJQUFJLGNBQWIsRUFBNEI7QUFDMUIsVUFBQSxZQUFZLENBQUUscUdBQW9HLFlBQVksQ0FBQyxHQUFJLEVBQXZILENBQVo7QUFDRDs7QUFDRCxRQUFBLFdBQVcsQ0FBQyxTQUFaLENBQXNCLElBQUksQ0FBQyxTQUFMLENBQWUsWUFBZixDQUF0QjtBQUNBLFFBQUEsT0FBTyxDQUFDLEdBQVIsQ0FBWSxlQUFaLEVBQTRCLElBQUksQ0FBQyxTQUFMLENBQWUsWUFBZixDQUE1QjtBQUNELE9BUEQsRUFRQyxLQVJELENBUVEsQ0FBRCxJQUFLO0FBQ1YsY0FBTSxDQUFOO0FBQ0QsT0FWRDtBQVlELEtBdkNELENBd0NBLE9BQU0sQ0FBTixFQUFRO0FBQ04sTUFBQSxPQUFPLENBQUMsR0FBUixDQUFZLHFDQUFaLEVBQW1ELENBQW5EO0FBQ0Q7QUFDRixHQWhERDtBQWlERCxDQTNIRCIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCl7ZnVuY3Rpb24gcihlLG4sdCl7ZnVuY3Rpb24gbyhpLGYpe2lmKCFuW2ldKXtpZighZVtpXSl7dmFyIGM9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZTtpZighZiYmYylyZXR1cm4gYyhpLCEwKTtpZih1KXJldHVybiB1KGksITApO3ZhciBhPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIraStcIidcIik7dGhyb3cgYS5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGF9dmFyIHA9bltpXT17ZXhwb3J0czp7fX07ZVtpXVswXS5jYWxsKHAuZXhwb3J0cyxmdW5jdGlvbihyKXt2YXIgbj1lW2ldWzFdW3JdO3JldHVybiBvKG58fHIpfSxwLHAuZXhwb3J0cyxyLGUsbix0KX1yZXR1cm4gbltpXS5leHBvcnRzfWZvcih2YXIgdT1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlLGk9MDtpPHQubGVuZ3RoO2krKylvKHRbaV0pO3JldHVybiBvfXJldHVybiByfSkoKSIsIlxuZXhwb3J0cy5tYWluID0gKHt1c2VySW5mbywgaXBmcywgcm9vbXN9KT0+e1xuICBsZXQgdXNlck5hbWUgPSAndXNlciAjMCc7XG4gIC8vZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Jvb21Qb3N0Zml4JykuaW5uZXJUZXh0ID0gcmFuZFJvb21Qb3N0Zml4O1xuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlck5hbWUnKS5pbm5lclRleHQgPSB1c2VyTmFtZTtcbiAgXG4gIFxuICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJqc29uZWRpdG9yXCIpO1xuICB2YXIgZWRpdG9yID0gbmV3IEpTT05FZGl0b3IoY29udGFpbmVyLCB7fSk7XG5cbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2J0bjEnKS5vbmNsaWNrID0gKCk9PntcbiAgICBlZGl0b3Iuc2V0KHtcbiAgICAgIHR4VHlwZTpcImdhc1RyYW5zZmVyXCIsXG4gICAgICBmcm9tUGVlcklkOiB1c2VyTmFtZSxcbiAgICAgIHRvUGVlcklkOlwidXNlciAjMFwiLFxuICAgICAgYW10OjE1XG4gICAgfSlcbiAgfVxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYnRuMicpLm9uY2xpY2sgPSAoKT0+e1xuICAgIGVkaXRvci5zZXQoe1xuICAgICAgdHhUeXBlOlwibmV3Tm9kZUpvaW5OZWVkUmFcIixcbiAgICAgIHVzZXJOYW1lLFxuICAgICAgZGVwb3NpdEFtdDoxMCxcbiAgICAgIGlwZnNQZWVySWQ6cm9vbXMudGFza1Jvb20uZ2V0TXlQZWVySWQoKSxcblxuICAgIH0pXG4gIH07XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG4zJykub25jbGljayA9ICgpPT57XG4gICAgZWRpdG9yLnNldCh7XG4gICAgICB0eFR5cGU6J3NldFByb29mT2ZUcnVzdEZvclRoaXNOb2RlJyxcbiAgICAgIHBzckRhdGE6J3BsYWNlaG9sZGVyJyxcbiAgICAgIGlzSGFja2VkOnRydWUsXG4gICAgICB0cG1QdWJsaWNLZXk6J3BsYWNlaG9sZGVyJ1xuICAgIH0pXG4gIH07XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG40Jykub25jbGljayA9ICgpPT57XG4gICAgZWRpdG9yLnNldCh7XG4gICAgICB0eFR5cGU6XCJ1cGxvYWRMYW1iZGFcIixcbiAgICAgIGxhbWJkYU5hbWU6XCJoZWxsb193b3JsZFwiLFxuICAgICAgZG9ja2VySW1nOlwicGxhY2Vob2xkZXJcIixcbiAgICAgIHBheW1lbnQ6XCJwYXlQZXJVc2VcIixcbiAgICAgIG93bmVyTmFtZTp1c2VyTmFtZSxcbiAgICAgIGFtdDoyXG4gICAgfSk7XG4gIH07XG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdidG41Jykub25jbGljayA9ICgpPT57XG4gICAgZWRpdG9yLnNldCh7XG4gICAgICB0eFR5cGU6XCJjb21wdXRlVGFza1wiLFxuICAgICAgdXNlck5hbWUsXG4gICAgICBsYW1iZGFDaWQ6XCJQTEVBU0VfUkVQTEFDRV9USElTX1ZBTFVFX1RPX1RIRV9sYW1iZGFDaWRfWU9VX0dPVF9GUk9NX1BSRVZJT1VTX3VwbG9hZExhbWJkYV9UQVNLXCIsXG4gICAgICBwb3N0U2VjRGF0YToncGxhY2Vob2xkZXInLFxuICAgICAgZW52OntcbiAgICAgICAgbmV0d29yazondG90YWxJc29sYXRlZCcsXG4gICAgICAgIGlwQWxsb3dlZDonbm9uZScsXG4gICAgICAgIHAycFRyYWZmaWNJbkFsbG93ZWQ6J293bmVyJyxcbiAgICAgICAgcmVzdWx0U2VuZEJhY2tUbzonb3duZXInLFxuICAgICAgICBlcnJvclNlbmRCYWNrVG86J293bmVyJyxcbiAgICAgICAgb3NSZXF1aXJlbWVudDpcIm5vbmVcIixcbiAgICAgICAgdGltZU91dDonMTAwJyxcbiAgICAgICAgY2xlYW5VcEFmdGVyOid0b3RhbFdpcGVvdXQnXG4gICAgICB9LFxuICAgICAgZXhlY3V0b3JSZXF1aXJlbWVudDp7XG4gICAgICAgIGNyZWRpdDozLFxuICAgICAgICBkZXBvc2l0OjEwXG5cbiAgICAgIH0sXG4gICAgICBtdWx0aVBhcnRpZXM6J25vbmUnLFxuICAgICAgZGVwb3NpdEFtdDozXG4gICAgfSk7XG5cbiAgfTtcbiAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlbGVjdFVzZXInKS5vbmNoYW5nZSA9ICgpPT57XG4gICAgdXNlck5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VsZWN0VXNlcicpLnZhbHVlO1xuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd1c2VyTmFtZScpLmlubmVySFRNTCA9IHVzZXJOYW1lOyBcbiAgfVxuICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VuZEFjdGlvbicpLm9uY2xpY2sgPSAoKT0+e1xuICAgIC8vY29uc3QgdXNlck5hbWUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndXNlck5hbWUnKS5pbm5lckhUTUw7XG4gICAgY29uc29sZS5sb2coXCJyZWFkeSB0byBzZW5kIGFjdGlvbixcIixKU09OLnN0cmluZ2lmeShlZGl0b3IuZ2V0KCksIG51bGwsIDIpKTtcbiAgICBjb25zdCBqc29uT2JqID0gZWRpdG9yLmdldCgpO1xuICAgIGNvbnN0IHR4VHlwZSA9IGpzb25PYmoudHhUeXBlO1xuICAgIHRyeXtcbiAgICAgIGxldCBjaGFubmVsUm9vbTtcbiAgICAgIGxldCBjaWQ7XG4gICAgICBjb25zdCBicm9hZGNhc3RPYmogPSB7dHhUeXBlfTtcbiAgICAgIGxldCBwcm9taXNlQ2lkO1xuICAgICAgc3dpdGNoKHR4VHlwZSl7XG4gICAgICAgIGNhc2UgXCJnYXNUcmFuc2ZlclwiOntcbiAgICAgICAgICBjaGFubmVsUm9vbSA9IHJvb21zLnRhc2tSb29tO1xuICAgICAgICAgIGNvbnN0IHtmcm9tUGVlcklkLCB0b1BlZXJJZCwgYW10fSA9IGpzb25PYmo7XG4gICAgICAgICAgcHJvbWlzZUNpZCA9IGlwZnMuZGFnLnB1dCh7XG4gICAgICAgICAgICBmcm9tUGVlcklkLCB0b1BlZXJJZCwgYW10XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgICAgY2FzZSBcInNldFByb29mT2ZUcnVzdEZvclRoaXNOb2RlXCI6XG4gICAgICAgICAgd2luZG93LnByb29mT2ZUcnVzdFRlc3QgPSBqc29uT2JqO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FzZSBcIm5ld05vZGVKb2luTmVlZFJhXCI6XG4gICAgICAgIGNhc2UgJ3VwbG9hZExhbWJkYSc6XG4gICAgICAgIGNhc2UgXCJjb21wdXRlVGFza1wiOlxuICAgICAgICAgIGNoYW5uZWxSb29tID0gcm9vbXMudGFza1Jvb207XG4gICAgICAgICAgcHJvbWlzZUNpZCA9IGlwZnMuZGFnLnB1dChqc29uT2JqKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICByZXR1cm4gY29uc29sZS5sb2coXCJ1bnN1cHBvcnRlZCBzZW5kQWN0aW9uIHR4VHlwZSxcIiwgdHhUeXBlKTtcbiAgICAgIH1cbiAgICAgIHByb21pc2VDaWQudGhlbigoY2lkKT0+e1xuICAgICAgICBicm9hZGNhc3RPYmouY2lkID0gY2lkLnRvQmFzZUVuY29kZWRTdHJpbmcoKTtcbiAgICAgICAgaWYodHhUeXBlID09ICd1cGxvYWRMYW1iZGEnKXtcbiAgICAgICAgICBsb2dUb1dlYlBhZ2UoYFBsZWFzZSByZWNvcmQgdGhpcyBDSUQgbnVtYmVyLCB5b3Ugd2lsbCBuZWVkIGl0IHdoZW4geW91IHN1Ym1pdCBhIGNvbXB1dGUgdGFzayB1c2luZyB0aGlzIExhbWRiYTogJHticm9hZGNhc3RPYmouY2lkfWApXG4gICAgICAgIH1cbiAgICAgICAgY2hhbm5lbFJvb20uYnJvYWRjYXN0KEpTT04uc3RyaW5naWZ5KGJyb2FkY2FzdE9iaikpO1xuICAgICAgICBjb25zb2xlLmxvZyhcIlNlbnQgYWN0aW9uOiBcIixKU09OLnN0cmluZ2lmeShicm9hZGNhc3RPYmopKTtcbiAgICAgIH0pIFxuICAgICAgLmNhdGNoKChlKT0+e1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSlcblxuICAgIH1cbiAgICBjYXRjaChlKXtcbiAgICAgIGNvbnNvbGUubG9nKFwiaW5zaWRlIHNlbmRBY3Rpb25Ub1Jvb20sIGV4Y3BldGlvbjpcIiwgZSk7XG4gICAgfVxuICB9O1xufTtcblxuXG5cblxuICAiXX0=
